<h1>映画詳細</h1>

<table>
  <tr>
    <th>ID</th>
    <td><%= @movie.id %></td>
  </tr>
  <tr>
    <th>タイトル</th>
    <td><%= @movie.name %></td>
  </tr>
  <tr>
    <th>公開年</th>
    <td><%= @movie.year %></td>
  </tr>
  <tr>
    <th>概要</th>
    <td><%= @movie.description %></td>
  </tr>
  <tr>
    <th>画像URL</th>
    <td>
      <% if @movie.image_url.present? %>
        <%= link_to @movie.image_url, @movie.image_url, target: '_blank' %>
      <% end %>
    </td>
  </tr>
  <tr>
    <th>上映状態</th>
    <td><%= @movie.is_showing ? '上映中' : '上映予定' %></td>
  </tr>
  <tr>
    <th>登録日時</th>
    <td><%= @movie.created_at %></td>
  </tr>
  <tr>
    <th>更新日時</th>
    <td><%= @movie.updated_at %></td>
  </tr>
</table>

<h2 style="margin-top: 30px;">上映スケジュール</h2>

<% if @schedules.present? %>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>開始時刻</th>
        <th>終了時刻</th>
        <th>上映時間</th>
      </tr>
    </thead>
    <tbody>
      <% @schedules.each do |schedule| %>
        <tr>
          <td><%= schedule.id %></td>
          <td><%= schedule.start_time.strftime('%H:%M') %></td>
          <td><%= schedule.end_time.strftime('%H:%M') %></td>
          <td>
            <% duration = ((schedule.end_time - schedule.start_time) / 60).to_i %>
            <%= "#{duration}分" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>この映画のスケジュールはまだ登録されていません。</p>
<% end %>

<div style="margin-top: 20px;">
  <%= link_to "一覧に戻る", movies_path %>
</div>

<style>
  table {
    border-collapse: collapse;
    margin-top: 20px;
  }
  
  th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: left;
  }
  
  th {
    background-color: #f5f5f5;
    width: 150px;
  }
</style>