<% if flash[:notice] %>
  <div class="notice">
    <%= flash[:notice] %>
  </div>
<% end %>

<% if flash[:alert] %>
  <div class="alert">
    <%= flash[:alert] %>
  </div>
<% end %>


<h1>Movies</h1>


<!-- 検索フォーム -->
<%= form_with url: movies_path, method: :get, local: true do |f| %>
  <div>
    <%= f.label :keyword, "キーワード検索" %>
    <%= f.text_field :keyword, value: params[:keyword], placeholder: "タイトルまたは概要で検索" %>
  </div>

  <div>
    <%= f.label :is_showing, "上映状態" %>
    <label>
      <%= f.radio_button :is_showing, "", checked: params[:is_showing].blank? %>
      すべて
    </label>
    <label>
      <%= f.radio_button :is_showing, "1", checked: params[:is_showing] == "1" %>
      上映中
    </label>
    <label>
      <%= f.radio_button :is_showing, "0", checked: params[:is_showing] == "0" %>
      上映予定
    </label>
  </div>

  <div>
    <%= f.submit "検索" %>
  </div>
<% end %>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>タイトル</th>
      <th>公開年</th>
      <th>概要</th>
      <th>画像URL</th>
      <th>上映中</th>
      <th>登録日時</th>
      <th>更新日時</th>
    </tr>
  </thead>
  <tbody>
    <% @movies.each do |movie| %>
      <tr>
        <td><%= link_to movie.id, "/movies/#{movie.id}" %></td>
        <td><%= movie.name %></td>
        <td><%= movie.year %></td>
        <td><%= movie.description %></td>
        <td><%= link_to '画像', movie.image_url %></td>
        <td><%= movie.is_showing ? '上映中' : '上映予定' %></td>
        <td><%= movie.created_at %></td>
        <td><%= movie.updated_at %></td>
      </tr>
    <% end %>
  </tbody>
</table>